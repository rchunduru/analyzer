// Generated by CoffeeScript 1.7.1
(function() {
  var parseMessage, parseUrl, promise, url;

  url = require('url');

  promise = require('bluebird');

  module.exports.parseUrl = parseUrl = function(givenUrl) {
    var parsedurl;
    parsedurl = url.parse(givenUrl, true);
    return parsedurl;
  };

  module.exports.parseMessage = parseMessage = function(message) {
    var parser;
    parser = require('packet').createParser();
    return new promise((function(_this) {
      return function(fulfill, reject) {
        parser.extract("l32 =>size", function(record) {
          var data, size;
          size = record.size;
          data = message.toString('utf-8', 4, size);
          return fulfill(JSON.parse(data));
        });
        return parser.parse(message);
      };
    })(this));
  };

}).call(this);
